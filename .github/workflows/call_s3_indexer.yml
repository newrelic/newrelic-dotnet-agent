name: Call S3 Indexer

on:
  workflow_dispatch:
  push:
    branches:
      - 'tippmar-nr/call-s3-indexer-workflow'

jobs:
  index-download-site:
    name: Rebuild indexes on the download site
#    if: ${{ github.event.inputs.downloadsite == 'true' }} 
    uses: ./.github/workflows/build_download_site_index_files.yml
    strategy:
      matrix:
        prefix: ["dot_net_agent/latest_release", "dot_net_agent/previous_releases/10.7.0"]
    with:
      prefix: ${{ matrix.prefix }}
      aws-region: "us-east-1"
      dry-run: true
    secrets: inherit
    