version: 2
updates:
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly
    groups:
      github-actions:
        patterns:
          - "*"
            
  # We do not scan anything in the /src/Agent/NewRelic/Agent/Extensions folder, as those projects
  # intentionally reference old versions of the Nuget packages they instrument.
  - package-ecosystem: nuget
    directories:
      - /src/Agent/NewRelic/Agent/Core
      - /src/Agent/NewRelic.Api.Agent
      - /build
      - /src/Agent/MsiInstaller
    schedule:
      interval: weekly
    groups: 
      nuget-agent:
        patterns:
          - "*"

  # Update a specific set of packages for unit and integration tests
  - package-ecosystem: nuget
    directories: 
      - /tests/Agent/IntegrationTests
      - /
    schedule:
      interval: weekly
    groups:
      nuget-tests:
        patterns:
          - "*"
    allow:
      - dependency-name: "coverlet.collector"
      - dependency-name: "JustMock"
      - dependency-name: "Microsoft.NET.Test.Sdk"
      - dependency-name: "Microsoft.VisualStudio.Azure.Containers.Tools.Targets"
      - dependency-name: "Microsoft.VisualStudio.Threading.Analyzers"
      - dependency-name: "NUnit*"
      - dependency-name: "Selenium*"
# Enable xunit after we fix the v2.9.0 upgrade blocker https://github.com/newrelic/newrelic-dotnet-agent/issues/2684
#      - dependency-name: "xunit*"
