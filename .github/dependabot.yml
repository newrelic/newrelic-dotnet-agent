version: 2
updates:
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly
    groups:
      github-actions:
        patterns:
          - "*"
            
  # We do not scan anything in the /src/Agent/NewRelic/Agent/Extensions folder, as those projects
  # intentionally reference old versions of the Nuget packages they instrument.
  - package-ecosystem: nuget
    directories:
      - /src/Agent/NewRelic/Agent/Core
      - /src/Agent/NewRelic.Api.Agent
      - /build
      - /src/Agent/MsiInstaller
    schedule:
      interval: weekly
    groups: 
      nuget-agent:
        patterns:
          - "*"

  # Update a specific set of packages for unit and integration tests
  - package-ecosystem: nuget
    directories: # not recursive - only the specified directory will be scanned for .csproj or .sln files
      - /tests/Agent/IntegrationTests # will pick up container, integration and unbounded test solutions
      - / # will pick up FullAgent.sln which contains the unit tests
    schedule:
      interval: weekly
    groups:
      nuget-tests:
        patterns:
          - "*"
    allow:
      - dependency-name: "coverlet.collector"
      - dependency-name: "JustMock"
      - dependency-name: "Microsoft.NET.Test.Sdk"
      - dependency-name: "Microsoft.VisualStudio.Azure.Containers.Tools.Targets"
      - dependency-name: "Microsoft.VisualStudio.Threading.Analyzers"
      - dependency-name: "NUnit*"
      - dependency-name: "Selenium*"
      - dependency-name: "xunit*"
      - dependency-name: "PublicApiGenerator"
      - dependency-name: "Verify.NUnit"
